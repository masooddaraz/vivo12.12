"use strict";window.g_aJa=class{constructor(e,g){this.g_aov=e,this.g_aJb=g,this.g_aJc=!1,this.g_anA=()=>this.g_Jj()}g_aJd(){}g_aJe(e,g,_,t){this.g_aov.g_aJf(this.g_aJb,e,g,_,t)}g_aJg(e,g,_,t){return this.g_aov.g_aJh(this.g_aJb,e,g,_,t)}g_aJi(e,g,_){this.g_aov.g_aJj()?this.g_aJe(e,g,_):this.g_aov.g_aJk()._OnMessageFromDOM({type:"event",component:this.g_aJb,handler:e,dispatchOpts:_||null,data:g,responseId:null})}g_aJl(e,g){this.g_aov.g_aJm(this.g_aJb,e,g)}g_aJn(e){for(const[g,_]of e)this.g_aJl(g,_)}g_aJo(){return this.g_aov}g_aJp(){return this.g_aJb}g_abK(){this.g_aJc||(this.g_aov.g_aJq(this.g_anA),this.g_aJc=!0)}g_abv(){this.g_aJc&&(this.g_aov.g_aJr(this.g_anA),this.g_aJc=!1)}g_Jj(){}},"use strict",window.g_aJs=class extends g_aJa{constructor(e,g){super(e,g),this.g_aJt=new Map,this.g_aJu=!0,this.g_aJl("create",e=>this.g_aJv(e)),this.g_aJl("destroy",e=>this.g_aJw(e)),this.g_aJl("set-visible",e=>this.g_aJx(e)),this.g_aJl("update-position",e=>this.g_aJy(e)),this.g_aJl("update-state",e=>this.g_aJz(e)),this.g_aJl("focus",e=>this.g_aJA(e)),this.g_aJl("set-css-style",e=>this.g_aJB(e))}g_aJC(e){this.g_aJu=!!e}g_aJD(e,g){this.g_aJl(e,e=>{const _=e.elementId,t=this.g_aJt.get(_);return g(t,e)})}g_aJv(e){const g=e.elementId,_=this.g_aci(g,e);this.g_aJt.set(g,_),e.isVisible||(_.style.display="none"),this.g_aJu&&document.body.appendChild(_)}g_aci(){throw new Error("required override")}g_aJE(){}g_aJw(e){const g=e.elementId,_=this.g_aJt.get(g);this.g_aJE(_),this.g_aJu&&_.parentElement.removeChild(_),this.g_aJt.delete(g)}g_aJF(e,g,_){_||(_={}),_.elementId=g,this.g_aJe(e,_)}g_aJG(e,g,_){_||(_={}),_.elementId=g,this.g_aJi(e,_)}g_aJx(e){if(this.g_aJu){const g=this.g_aJt.get(e.elementId);g.style.display=e.isVisible?"":"none"}}g_aJy(e){if(this.g_aJu){const g=this.g_aJt.get(e.elementId);g.style.left=e.left+"px",g.style.top=e.top+"px",g.style.width=e.width+"px",g.style.height=e.height+"px";const _=e.fontSize;null!==_&&(g.style.fontSize=_+"em")}}g_aJz(e){const g=this.g_aJt.get(e.elementId);this.g_aJH(g,e)}g_aJH(){throw new Error("required override")}g_aJA(e){const g=this.g_aJt.get(e.elementId);e.focus?g.focus():g.blur()}g_aJB(e){const g=this.g_aJt.get(e.elementId);g.style[e.prop]=e.val}g_aJI(e){return this.g_aJt.get(e)}},"use strict";{function _(e){return new Promise((g,_)=>{const t=document.createElement("script");t.onload=g,t.onerror=_,t.async=!1,t.src=e,document.head.appendChild(t)})}async function t(e){const g=await n(e),_=new TextDecoder("utf-8");return _.decode(g)}function n(e){return new Promise((g,_)=>{const t=new FileReader;t.onload=e=>g(e.target.result),t.onerror=e=>_(e),t.readAsArrayBuffer(e)})}const a=/(iphone|ipod|ipad)/i.test(navigator.userAgent);let b=new Audio;const o={"audio/webm; codecs=opus":!!b.canPlayType("audio/webm; codecs=opus"),"audio/ogg; codecs=opus":!!b.canPlayType("audio/ogg; codecs=opus"),"audio/webm; codecs=vorbis":!!b.canPlayType("audio/webm; codecs=vorbis"),"audio/ogg; codecs=vorbis":!!b.canPlayType("audio/ogg; codecs=vorbis"),"audio/mp4":!!b.canPlayType("audio/mp4"),"audio/mpeg":!!b.canPlayType("audio/mpeg")};b=null;const e=[];let g=0;window.RealFile=window.File;const r=[],i=new Map,s=new Map;let y=0;const l=[];self.g_aJJ=function(e){if("function"!=typeof e)throw new Error("runOnStartup called without a function");l.push(e)},window.g_aJK=class b{constructor(e){this.g_aJL=e.g_aJM,this.g_aJN=null,this.g_amz="",this.g_aJO=e.g_aJP,this.g_aJQ={},this.g_aJR=null,this.g_aJS=null,this.g_aJT=[],this.g_aJU=null,this.g_akA=null,this.g_aop=null,this.g_alh=-1,this.g_aJV=()=>this.g_aJW(),this.g_aJX=[],this.g_amE=e.g_aJY,("cordova"===this.g_amE||"playable-ad"===this.g_amE||"instant-games"===this.g_amE)&&this.g_aJL&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in WebViews due to crbug.com/923007. Reverting to DOM mode."),this.g_aJL=!1),/CrOS/.test(navigator.userAgent)&&(console.warn("[C3 runtime] Worker mode is enabled and supported, but is disabled in Chrome OS due to reports of crashes. Reverting to DOM mode."),this.g_aJL=!1),this.g_aJZ=!1,this.g_aJ_=null,("html5"===this.g_amE||"playable-ad"===this.g_amE)&&"file"===location.protocol.substr(0,4)&&alert("Exported games won't work until you upload them. (When running on the file: protocol, browsers block many features from working for security reasons.)"),this.g_aJm("runtime","cordova-fetch-local-file",e=>this.g_aJ$(e)),this.g_aJm("runtime","create-job-worker",e=>this.g_aKa(e)),"cordova"===this.g_amE?document.addEventListener("deviceready",()=>this.g_aay(e)):this.g_aay(e)}g_em(){this.g_aKb(),this.g_aJN&&(this.g_aJN.onmessage=null,this.g_aJN=null),this.g_aJR&&(this.g_aJR.terminate(),this.g_aJR=null),this.g_aJS&&(this.g_aJS.g_em(),this.g_aJS=null),this.g_akA&&(this.g_akA.parentElement.removeChild(this.g_akA),this.g_akA=null)}g_aKc(){return this.g_akA}g_fg(){return this.g_amz}g_aJj(){return this.g_aJL}g_apV(){return this.g_amE}g_aoN(){return"cordova"===this.g_amE&&a}g_aKd(){return"cordova"===this.g_amE&&!1===a}async g_aay(e){if("playable-ad"===this.g_amE){this.g_aJ_=self.c3_base64files,await this.g_aKe();for(let g=0,_=e.g_aKf.length;g<_;++g){const _=e.g_aKf[g].toLowerCase();this.g_aJ_.hasOwnProperty(_)&&(e.g_aKf[g]=URL.createObjectURL(this.g_aJ_[_]))}}if(e.g_aKg)this.g_amz=e.g_aKg;else{const e=location.origin;this.g_amz=("null"===e?"file:///":e)+location.pathname;const g=this.g_amz.lastIndexOf("/");-1!==g&&(this.g_amz=this.g_amz.substr(0,g+1))}if(e.g_aKh)for(const[g,_]of Object.entries(e.g_aKh))this.g_aJQ[g]=URL.createObjectURL(_);const g=new MessageChannel;this.g_aJN=g.port1,this.g_aJN.onmessage=e=>this._OnMessageFromRuntime(e.data),window.c3_addPortMessageHandler&&window.c3_addPortMessageHandler(e=>this.g_aKi(e)),this.g_aop=new self.g_aKj(this),await this.g_aop.g_ahH(),this.g_aKk(),"object"==typeof window.StatusBar&&window.StatusBar.hide(),"object"==typeof window.AndroidFullScreen&&window.AndroidFullScreen.immersiveMode(),await this.g_aKl(),this.g_aJL?await this.g_aKm(e,g.port2):await this.g_aKn(e,g.port2)}g_aKo(e){return this.g_aJQ.hasOwnProperty(e)?this.g_aJQ[e]:e.endsWith("/workermain.js")&&this.g_aJQ.hasOwnProperty("workermain.js")?this.g_aJQ["workermain.js"]:"playable-ad"===this.g_amE&&this.g_aJ_.hasOwnProperty(e.toLowerCase())?URL.createObjectURL(this.g_aJ_[e.toLowerCase()]):e}async g_aKp(g,_,t){if(g.startsWith("blob:"))return new Worker(g,t);if(this.g_aoN()){const e=await this.g_As(this.g_aJO+g),_=new Blob([e],{type:"application/javascript"});return new Worker(URL.createObjectURL(_),t)}const n=new URL(g,_),a=location.origin!==n.origin;if(a){const e=await fetch(n);if(!e.ok)throw new Error("failed to fetch worker script");const g=await e.blob();return new Worker(URL.createObjectURL(g),t)}return new Worker(n,t)}g_aKk(){if(this.g_aoN()){const g=document.documentElement.style,_=document.body.style,t=window.innerWidth<window.innerHeight,a=t?window.screen.width:window.screen.height,n=t?window.screen.height:window.screen.width;_.height=g.height=n+"px",_.width=g.width=a+"px"}}g_aKq(e){return{baseUrl:this.g_amz,windowInnerWidth:window.innerWidth,windowInnerHeight:window.innerHeight,devicePixelRatio:window.devicePixelRatio,isFullscreen:b.g_alL(),projectData:e.g_aKr,previewImageBlobs:window.cr_previewImageBlobs||this.g_aJ_,previewProjectFileBlobs:window.cr_previewProjectFileBlobs,exportType:e.g_aJY,isDebug:-1<self.location.search.indexOf("debug"),ife:!!self.g_aKs,jobScheduler:this.g_aop.g_aKt(),supportedAudioFormats:o,opusWasmScriptUrl:window.cr_opusWasmScriptUrl||this.g_aJO+"opus.wasm.js",opusWasmBinaryUrl:window.cr_opusWasmBinaryUrl||this.g_aJO+"opus.wasm.wasm",isWKWebView:this.g_aoN(),isFBInstantAvailable:"undefined"!=typeof self.FBInstant}}async g_aKm(e,g){const _=this.g_aKo(e.g_aKu);this.g_aJR=await this.g_aKp(_,this.g_amz,{name:"Runtime"}),this.g_akA=document.createElement("canvas"),this.g_akA.style.display="none";const t=this.g_akA.transferControlToOffscreen();document.body.appendChild(this.g_akA),window.c3canvas=this.g_akA,this.g_aJR.postMessage(Object.assign(this.g_aKq(e),{type:"init-runtime",isInWorker:!0,messagePort:g,canvas:t,workerDependencyScripts:e.g_aKv||[],engineScripts:e.g_aKf,projectScripts:window.g_aKw,projectScriptsStatus:self.C3_ProjectScriptsStatus}),[g,t,...this.g_aop.g_aKx()]),this.g_aJT=r.map(e=>new e(this)),this.g_aKy(),self.c3_callFunction=(e,g)=>this.g_aJU.g_S$(e,g),"preview"===this.g_amE&&(self.goToLastErrorScript=()=>this.g_aJf("runtime","go-to-last-error-script"))}async g_aKn(g,t){this.g_akA=document.createElement("canvas"),this.g_akA.style.display="none",document.body.appendChild(this.g_akA),window.c3canvas=this.g_akA,this.g_aJT=r.map(e=>new e(this)),this.g_aKy();const a=g.g_aKf.map(e=>new URL(e,this.g_amz).toString());if(Array.isArray(g.g_aKv)&&a.unshift(...g.g_aKv),await Promise.all(a.map(e=>_(e))),g.g_aKz&&0<g.g_aKz.length){const e=self.C3_ProjectScriptsStatus;try{if(await Promise.all(g.g_aKz.map(e=>_(e[1]))),Object.values(e).some(e=>!e))return void self.setTimeout(()=>this.g_aKA(e),100)}catch(g){return console.error("[Preview] Error loading project scripts: ",g),void self.setTimeout(()=>this.g_aKA(e),100)}}if("preview"===this.g_amE&&"object"!=typeof self.g_aQ.g_aI$)return console.error("[C3 runtime] Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax."),void alert("Failed to load JavaScript code used in events. Check all your JavaScript code has valid syntax.");const n=Object.assign(this.g_aKq(g),{isInWorker:!1,messagePort:t,canvas:this.g_akA,runOnStartupFunctions:l});this.g_aJS=self.C3_CreateRuntime(n),await self.C3_InitRuntime(this.g_aJS,n)}g_aKA(e){const g=Object.entries(e).filter(e=>!e[1]).map(e=>e[0]),_=`Failed to load project script '${g[0]}'. Check all your JavaScript code has valid syntax.`;console.error("[Preview] "+_),alert(_)}async g_aKa(){const e=await this.g_aop.g_aKB();return{outputPort:e,transferables:[e]}}g_aJk(){if(this.g_aJL)throw new Error("not available in worker mode");return this.g_aJS}g_aJf(g,_,t,a,n){this.g_aJN.postMessage({type:"event",component:g,handler:_,dispatchOpts:a||null,data:t,responseId:null},this.g_aJZ?void 0:n)}g_aJh(_,t,a,n,i){const e=y++,b=new Promise((g,_)=>{s.set(e,{resolve:g,reject:_})});return this.g_aJN.postMessage({type:"event",component:_,handler:t,dispatchOpts:n||null,data:a,responseId:e},this.g_aJZ?void 0:i),b}["_OnMessageFromRuntime"](e){const g=e.type;if("event"===g)this.g_aKC(e);else if("result"===g)this.g_aKD(e);else if("runtime-ready"===g)this.g_aKE();else if("alert"===g)alert(e.message);else throw new Error(`unknown message '${g}'`)}g_aKC(_){const t=_.component,n=_.handler,a=_.data,b=_.responseId,e=i.get(t);if(!e)return void console.warn(`[DOM] No event handlers for component '${t}'`);const o=e.get(n);if(!o)return void console.warn(`[DOM] No handler '${n}' for component '${t}'`);let g=null;try{g=o(a)}catch(e){return console.error(`Exception in '${t}' handler '${n}':`,e),void(null!==b&&this.g_aKF(b,!1,e.toString()))}null!==b&&(g&&g.then?g.then(e=>this.g_aKF(b,!0,e)).catch(e=>{console.error(`Rejection from '${t}' handler '${n}':`,e),this.g_aKF(b,!1,e.toString())}):this.g_aKF(b,!0,g))}g_aKF(e,g,_){let t;_&&_.transferables&&(t=_.transferables),this.g_aJN.postMessage({type:"result",responseId:e,isOk:g,result:_},t)}g_aKD(g){const _=g.responseId,t=g.isOk,a=g.result,n=s.get(_);t?n.resolve(a):n.reject(a),s.delete(_)}g_aJm(e,g,_){let t=i.get(e);if(t||(t=new Map,i.set(e,t)),t.has(g))throw new Error(`[DOM] Component '${e}' already has handler '${g}'`);t.set(g,_)}static g_aKG(e){if(r.includes(e))throw new Error("DOM handler already added");r.push(e)}g_aKy(){for(const e of this.g_aJT)if("runtime"===e.g_aJp())return void(this.g_aJU=e);throw new Error("cannot find runtime DOM handler")}g_aKi(e){this.g_aJf("debugger","message",e)}g_aKE(){for(const e of this.g_aJT)e.g_aJd()}static g_alL(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)}async g_aKH(){return await this.g_aJh("runtime","get-remote-preview-status-info")}g_aJq(e){this.g_aJX.push(e),this.g_aKI()}g_aJr(e){const g=this.g_aJX.indexOf(e);if(-1===g)throw new Error("invalid callback");this.g_aJX.splice(g,1),this.g_aJX.length||this.g_aKb()}g_aKI(){-1===this.g_alh&&this.g_aJX.length&&(this.g_alh=requestAnimationFrame(this.g_aJV))}g_aKb(){-1!==this.g_alh&&(cancelAnimationFrame(this.g_alh),this.g_alh=-1)}g_aJW(){this.g_alh=-1;for(const e of this.g_aJX)e();this.g_aKI()}g_aKJ(e){this.g_aJU.g_aKJ(e)}g_aKK(e){this.g_aJU.g_aKK(e)}g_aKL(){this.g_aJU.g_aKL()}g_aKM(e){this.g_aJU.g_aKM(e)}g_AP(e){return!!o[e]}async g_adC(e){const g=await this.g_aJh("runtime","opus-decode",{arrayBuffer:e},null,[e]);return new Float32Array(g)}g_fS(e){return /^(?:[a-z]+:)?\/\//.test(e)||"data:"===e.substr(0,5)||"blob:"===e.substr(0,5)}g_fT(e){return!this.g_fS(e)}async g_aJ$(e){const g=e.filename;switch(e.as){case"text":return await this.g_At(g);case"buffer":return await this.g_As(g);default:throw new Error("unsupported type");}}g_aKN(e){const g=window.cordova.file.applicationDirectory+"www/"+e.toLowerCase();return new Promise((e,_)=>{window.resolveLocalFileSystemURL(g,g=>{g.file(e,_)},_)})}async g_At(e){const g=await this.g_aKN(e);return await t(g)}g_aKO(){if(e.length&&!(8<=g)){g++;const _=e.shift();this.g_aKP(_.filename,_.g_aKQ,_.g_aKR)}}g_As(_){return new Promise((t,n)=>{e.push({filename:_,g_aKQ:e=>{g--,this.g_aKO(),t(e)},g_aKR:e=>{g--,this.g_aKO(),n(e)}}),this.g_aKO()})}async g_aKP(g,_,e){try{const t=await this.g_aKN(g),a=await n(t);_(a)}catch(g){e(g)}}async g_aKe(){const e=[];for(const[g,_]of Object.entries(this.g_aJ_))e.push(this.g_aKS(g,_));await Promise.all(e)}async g_aKS(e,g){if("object"==typeof g)this.g_aJ_[e]=new Blob([g.str],{type:g.type});else{const _=await fetch(g),t=await _.blob();this.g_aJ_[e]=t}}g_aKl(){let e=null;const g=new Promise(g=>e=g),_=new ArrayBuffer(1),t=new MessageChannel;return t.port2.onmessage=g=>{g.data&&g.data.arrayBuffer||(this.g_aJZ=!0,console.warn("MessageChannel transfers determined to be broken. Disabling transferables.")),e()},t.port1.postMessage({arrayBuffer:_},[_]),g}}}{function _(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents||e.originalEvent&&e.originalEvent.sourceCapabilities&&e.originalEvent.sourceCapabilities.firesTouchEvents}function t(e){return new Promise((g,_)=>{const t=document.createElement("link");t.onload=()=>g(t),t.onerror=e=>_(e),t.rel="stylesheet",t.href=e,document.head.appendChild(t)})}function a(e){return new Promise((g,_)=>{const t=new Image;t.onload=()=>g(t),t.onerror=e=>_(e),t.src=e})}async function r(e){const g=URL.createObjectURL(e);try{return await a(g)}finally{URL.revokeObjectURL(g)}}function s(e){do{if(e.parentNode&&e.hasAttribute("contenteditable"))return!0;e=e.parentNode}while(e);return!1}function d(e){const g=e.target.tagName.toLowerCase();l.has(g)&&e.preventDefault()}function e(e){(e.metaKey||e.ctrlKey)&&e.preventDefault()}function g(){try{return window.parent&&window.parent.document.hasFocus()}catch(e){return!1}}const y=new Map([["OSLeft","MetaLeft"],["OSRight","MetaRight"]]),i={dispatchRuntimeEvent:!0,dispatchUserScriptEvent:!0},u={dispatchUserScriptEvent:!0},c={dispatchRuntimeEvent:!0},l=new Set(["canvas","body","html"]);self.C3_RasterSvgImage=async function(g,_,t){const a=document.createElement("canvas");a.width=_,a.height=t;const n=a.getContext("2d");return n.drawImage(g,0,0,_,t),a};let b=!1;document.addEventListener("pause",()=>b=!0),document.addEventListener("resume",()=>b=!1);const n=class extends g_aJa{constructor(g){super(g,"runtime"),this.g_aKT=!0,this.g_aKU=-1,this.g_aKV="any",this.g_aKW=!1,this.g_aKX=!1,this.g_aKY=null,g.g_aJm("canvas","update-size",e=>this.g_aKZ(e)),g.g_aJm("runtime","invoke-download",e=>this.g_aK_(e)),g.g_aJm("runtime","raster-svg-image",e=>this.g_aK$(e)),g.g_aJm("runtime","set-target-orientation",e=>this.g_aLa(e)),g.g_aJm("runtime","register-sw",()=>this.g_aLb()),g.g_aJm("runtime","post-to-debugger",e=>this.g_aLc(e)),g.g_aJm("runtime","go-to-script",e=>this.g_aLc(e)),g.g_aJm("runtime","before-start-ticking",()=>this.g_aLd()),g.g_aJm("runtime","debug-highlight",e=>this.g_aLe(e)),g.g_aJm("runtime","enable-device-orientation",()=>this.g_aLf()),g.g_aJm("runtime","enable-device-motion",()=>this.g_aLg()),g.g_aJm("runtime","add-stylesheet",e=>this.g_aLh(e));const _=new Set(["input","textarea","datalist"]);window.addEventListener("contextmenu",e=>{const g=e.target,t=g.tagName.toLowerCase();_.has(t)||s(g)||e.preventDefault()}),window.addEventListener("selectstart",d),window.addEventListener("gesturehold",d),window.addEventListener("touchstart",d,{passive:!1});const t=g.g_aKc();"undefined"==typeof PointerEvent?t.addEventListener("touchstart",d):(window.addEventListener("pointerdown",d,{passive:!1}),t.addEventListener("pointerdown",d)),this.g_aLi=0,window.addEventListener("mousedown",e=>{1===e.button&&e.preventDefault()}),window.addEventListener("mousewheel",e,{passive:!1}),window.addEventListener("wheel",e,{passive:!1}),window.addEventListener("resize",()=>this.g_aly()),this.g_aLj=new Set,this.g_aLk=new WeakSet,this.g_aLl=!1}g_aLd(){return"cordova"===this.g_aov.g_apV()?(document.addEventListener("pause",()=>this.g_aor(!0)),document.addEventListener("resume",()=>this.g_aor(!1))):document.addEventListener("visibilitychange",()=>this.g_aor(document.hidden)),{isSuspended:!!(document.hidden||b)}}g_aJd(){window.addEventListener("focus",()=>this.g_aLm("window-focus")),window.addEventListener("blur",()=>{this.g_aLm("window-blur",{parentHasFocus:g()}),this.g_aLi=0}),window.addEventListener("fullscreenchange",()=>this.g_alz()),window.addEventListener("webkitfullscreenchange",()=>this.g_alz()),window.addEventListener("mozfullscreenchange",()=>this.g_alz()),window.addEventListener("fullscreenerror",e=>this.g_alA(e)),window.addEventListener("webkitfullscreenerror",e=>this.g_alA(e)),window.addEventListener("mozfullscreenerror",e=>this.g_alA(e)),window.addEventListener("keydown",e=>this.g_aLn("keydown",e)),window.addEventListener("keyup",e=>this.g_aLn("keyup",e)),window.addEventListener("dblclick",e=>this.g_aLo("dblclick",e,i)),window.addEventListener("wheel",e=>this.g_aLp("wheel",e)),"undefined"==typeof PointerEvent?(window.addEventListener("mousedown",e=>this.g_aLq("pointerdown",e)),window.addEventListener("mousemove",e=>this.g_aLq("pointermove",e)),window.addEventListener("mouseup",e=>this.g_aLq("pointerup",e)),window.addEventListener("touchstart",e=>this.g_aLr("pointerdown",e)),window.addEventListener("touchmove",e=>this.g_aLr("pointermove",e)),window.addEventListener("touchend",e=>this.g_aLr("pointerup",e)),window.addEventListener("touchcancel",e=>this.g_aLr("pointercancel",e))):(window.addEventListener("pointerdown",e=>this.g_aLs("pointerdown",e)),window.addEventListener("pointermove",e=>this.g_aLs("pointermove",e)),window.addEventListener("pointerup",e=>this.g_aLs("pointerup",e)),window.addEventListener("pointercancel",e=>this.g_aLs("pointercancel",e)));const e=()=>this.g_aKL();window.addEventListener("pointerup",e,!0),window.addEventListener("touchend",e,!0),window.addEventListener("click",e,!0),window.addEventListener("keydown",e,!0),window.addEventListener("gamepadconnected",e,!0)}g_aLm(e,g){this.g_aJe(e,g||null,c)}g_aLt(){return Math.max(window.innerWidth,1)}g_aLu(){return Math.max(window.innerHeight,1)}g_aly(){const e=this.g_aLt(),g=this.g_aLu();this.g_aLm("window-resize",{innerWidth:e,innerHeight:g,devicePixelRatio:window.devicePixelRatio}),this.g_aov.g_aoN()&&(-1!==this.g_aKU&&clearTimeout(this.g_aKU),this.g_aLv(e,g,0))}g_aLw(e,g,_){-1!==this.g_aKU&&clearTimeout(this.g_aKU),this.g_aKU=setTimeout(()=>this.g_aLv(e,g,_),48)}g_aLv(g,_,t){const a=this.g_aLt(),n=this.g_aLu();this.g_aKU=-1,a!=g||n!=_?this.g_aLm("window-resize",{innerWidth:a,innerHeight:n,devicePixelRatio:window.devicePixelRatio}):10>t&&this.g_aLw(a,n,t+1)}g_aLa(e){this.g_aKV=e.targetOrientation}g_aLx(){const e=this.g_aKV;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(e).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let g=!1;screen.lockOrientation?g=screen.lockOrientation(e):screen.webkitLockOrientation?g=screen.webkitLockOrientation(e):screen.mozLockOrientation?g=screen.mozLockOrientation(e):screen.msLockOrientation&&(g=screen.msLockOrientation(e)),g||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_alz(){const e=g_aJK.g_alL();e&&"any"!==this.g_aKV&&this.g_aLx(),this.g_aJe("fullscreenchange",{isFullscreen:e,innerWidth:this.g_aLt(),innerHeight:this.g_aLu()})}g_alA(e){console.warn("[Construct 3] Fullscreen request failed: ",e),this.g_aJe("fullscreenerror",{isFullscreen:g_aJK.g_alL(),innerWidth:this.g_aLt(),innerHeight:this.g_aLu()})}g_aor(e){e?this.g_aov.g_aKb():this.g_aov.g_aKI(),this.g_aJe("visibilitychange",{hidden:e})}g_aLn(e,g){const _=y.get(g.code)||g.code;this.g_aJi(e,{code:_,key:g.key,which:g.which,repeat:g.repeat,altKey:g.altKey,ctrlKey:g.ctrlKey,metaKey:g.metaKey,shiftKey:g.shiftKey,timeStamp:g.timeStamp},i)}g_aLp(e,g){this.g_aJe(e,{clientX:g.clientX,clientY:g.clientY,deltaX:g.deltaX,deltaY:g.deltaY,deltaZ:g.deltaZ,deltaMode:g.deltaMode,timeStamp:g.timeStamp},i)}g_aLo(e,g,t){_(g)||("mousedown"===e&&window!==window.top&&window.focus(),this.g_aJi(e,{button:g.button,buttons:g.buttons,clientX:g.clientX,clientY:g.clientY,timeStamp:g.timeStamp},t))}g_aLq(e,g){if(!_(g)){"pointerdown"===e&&window!==window.top&&window.focus();const _=this.g_aLi;"pointerdown"===e&&0!==_?e="pointermove":"pointerup"==e&&0!==g.buttons&&(e="pointermove"),this.g_aJi(e,{pointerId:1,pointerType:"mouse",button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,timeStamp:g.timeStamp},i),this.g_aLi=g.buttons,this.g_aLo(g.type,g,u)}}g_aLs(e,g){"pointerdown"===e&&window!==window.top&&window.focus();let _=0;if("mouse"===g.pointerType&&(_=this.g_aLi),this.g_aJi(e,{pointerId:g.pointerId,pointerType:g.pointerType,button:g.button,buttons:g.buttons,lastButtons:_,clientX:g.clientX,clientY:g.clientY,width:g.width||0,height:g.height||0,pressure:g.pressure||0,tangentialPressure:g.tangentialPressure||0,tiltX:g.tiltX||0,tiltY:g.tiltY||0,twist:g.twist||0,timeStamp:g.timeStamp},i),"mouse"===g.pointerType){let _="mousemove";"pointerdown"===e?_="mousedown":"pointerup"==e&&(_="pointerup"),this.g_aLo(_,g,u),this.g_aLi=g.buttons}}g_aLr(e,g){"pointerdown"===e&&window!==window.top&&window.focus();for(let _=0,t=g.changedTouches.length;_<t;++_){const t=g.changedTouches[_];this.g_aJi(e,{pointerId:t.identifier,pointerType:"touch",button:0,buttons:0,lastButtons:0,clientX:t.clientX,clientY:t.clientY,width:2*(t.radiusX||t.webkitRadiusX||0),height:2*(t.radiusY||t.webkitRadiusY||0),pressure:t.force||t.webkitForce||0,tangentialPressure:0,tiltX:0,tiltY:0,twist:t.rotationAngle||0,timeStamp:g.timeStamp},i)}}g_aLf(){this.g_aKW||(this.g_aKW=!0,window.addEventListener("deviceorientation",e=>this.g_axX(e)))}g_aLg(){this.g_aKX||(this.g_aKX=!0,window.addEventListener("devicemotion",e=>this.g_axY(e)))}g_axX(e){this.g_aJe("deviceorientation",{alpha:e.alpha||0,beta:e.beta||0,gamma:e.gamma||0,timeStamp:e.timeStamp},i)}g_axY(_){let t=null;const a=_.acceleration;a&&(t={x:a.x||0,y:a.y||0,z:a.z||0});let n=null;const o=_.accelerationIncludingGravity;o&&(n={x:o.x||0,y:o.y||0,z:o.z||0});let e=null;const r=_.rotationRate;r&&(e={alpha:r.alpha||0,beta:r.beta||0,gamma:r.gamma||0}),this.g_aJe("devicemotion",{acceleration:t,accelerationIncludingGravity:n,rotationRate:e,interval:_.interval,timeStamp:_.timeStamp},i)}g_aKZ(e){const g=this.g_aJo(),_=g.g_aKc();_.style.width=e.styleWidth+"px",_.style.height=e.styleHeight+"px",_.style.marginLeft=e.marginLeft+"px",_.style.marginTop=e.marginTop+"px",g.g_aKk(),this.g_aKT&&(_.style.display="",this.g_aKT=!1)}g_aK_(g){const _=g.url,t=g.filename,n=document.createElement("a"),e=document.body;n.textContent=t,n.href=_,n.download=t,e.appendChild(n),n.click(),e.removeChild(n)}async g_aK$(_){const t=_.blob,a=_.width,n=_.height,e=await r(t),i=await self.C3_RasterSvgImage(e,a,n);return await createImageBitmap(i)}async g_aLh(e){await t(e.url)}g_aKL(){const e=[...this.g_aLj];if(this.g_aLj.clear(),!this.g_aLl)for(const g of e){const e=g.play();e&&e.catch(()=>{this.g_aLk.has(g)||this.g_aLj.add(g)})}}g_aKJ(e){if("function"!=typeof e.play)throw new Error("missing play function");this.g_aLk.delete(e);let g;try{g=e.play()}catch(g){return void this.g_aLj.add(e)}g&&g.catch(()=>{this.g_aLk.has(e)||this.g_aLj.add(e)})}g_aKK(e){this.g_aLj.delete(e),this.g_aLk.add(e)}g_aKM(e){this.g_aLl=!!e}g_aLe(e){const g=e.show;if(!g)return void(this.g_aKY&&(this.g_aKY.style.display="none"));this.g_aKY||(this.g_aKY=document.createElement("div"),this.g_aKY.id="inspectOutline",document.body.appendChild(this.g_aKY));const _=this.g_aKY;_.style.display="",_.style.left=e.left-1+"px",_.style.top=e.top-1+"px",_.style.width=e.width+2+"px",_.style.height=e.height+2+"px",_.textContent=e.name}g_aLb(){window.C3_RegisterSW&&window.C3_RegisterSW()}g_aLc(e){window.c3_postToMessagePort&&(e.from="runtime",window.c3_postToMessagePort(e))}g_S$(e,g){return this.g_aJg("js-invoke-function",{name:e,params:g})}};g_aJK.g_aKG(n)}{const e=document.currentScript.src;self.g_aKj=class{constructor(g){this.g_aLy=g,this.g_amz=e?e.substr(0,e.lastIndexOf("/")+1):g.g_fg(),this.g_aqA=Math.min(navigator.hardwareConcurrency||2,16),this.g_aLz=null,this.g_aLA=[],this.g_aqy=null,this.g_aLB=null}async g_ahH(){if(this.g_aLC)throw new Error("already initialised");this.g_aLC=!0;const e=this.g_aLy.g_aKo("dispatchworker.js");this.g_aLz=await this.g_aLy.g_aKp(e,this.g_amz,{name:"DispatchWorker"});const g=new MessageChannel;this.g_aqy=g.port1,this.g_aLz.postMessage({type:"_init","in-port":g.port2},[g.port2]),this.g_aLB=await this.g_aKB()}async g_aKB(){const g=this.g_aLA.length,_=this.g_aLy.g_aKo("jobworker.js"),t=await this.g_aLy.g_aKp(_,this.g_amz,{name:"JobWorker"+g}),a=new MessageChannel,n=new MessageChannel;return this.g_aLz.postMessage({type:"_addJobWorker",port:a.port1},[a.port1]),t.postMessage({type:"init",number:g,"dispatch-port":a.port2,"output-port":n.port2},[a.port2,n.port2]),this.g_aLA.push(t),n.port1}g_aKt(){return{inputPort:this.g_aqy,outputPort:this.g_aLB,maxNumWorkers:this.g_aqA}}g_aKx(){return[this.g_aqy,this.g_aLB]}}}if("use strict",window.C3_IsSupported){"undefined"!=typeof OffscreenCanvas;window.c3_runtimeInterface=new g_aJK({g_aJM:!1,g_aKu:"workermain.js",g_aKf:["scripts/c3runtime.js"],g_aJP:"scripts/",g_aKv:[],g_aJY:"html5"})}{function e(e,g){return e.length===g.length&&(e===g||e.toLowerCase()===g.toLowerCase())}const g=class extends g_aJa{constructor(e){super(e,"audio"),this.g_bvr=null,this.g_bvs=null,this.g_bvt=!1,this.g_bvu=()=>this.g_bvv(),this.g_bvw=[],this.g_bvx=[],this.g_bvy=null,this.g_bvz="",this.g_bvA=-1,this.g_bvB=new Map,this.g_bro=1,this.g_aLl=!1,this.g_brb=0,this.g_ahD=1,this.g_anQ=0,this.g_bre="HRTF",this.g_brf="inverse",this.g_bvC=600,this.g_brk=1e4,this.g_brl=1,this.g_bvD=!1,this.g_bvE=!1,this.g_bvF=this.g_aov.g_AP("audio/webm; codecs=opus"),this.g_bvG=new Map,this.g_bvH=new Set,this.g_bvI=!1,this.g_bvJ="",this.g_bvK=null,self.C3Audio_OnMicrophoneStream=(e,g)=>this.g_bvL(e,g),this.g_bvM=null,self.C3Audio_GetOutputStream=()=>this.g_bvN(),this.g_aJn([["create-audio-context",e=>this.g_bvO(e)],["play",e=>this.g_bvP(e)],["stop",e=>this.g_btx(e)],["stop-all",()=>this.g_bvQ()],["set-paused",e=>this.g_bvR(e)],["set-volume",e=>this.g_bvS(e)],["fade-volume",e=>this.g_bvT(e)],["set-master-volume",e=>this.g_bvU(e)],["set-muted",e=>this.g_bvV(e)],["set-silent",e=>this.g_bvW(e)],["set-looping",e=>this.g_bvX(e)],["set-playback-rate",e=>this.g_bvY(e)],["seek",e=>this.g_bvZ(e)],["preload",e=>this.g_bv_(e)],["unload",e=>this.g_F_(e)],["unload-all",()=>this.g_bv$()],["set-suspended",e=>this.g_bwa(e)],["add-effect",e=>this.g_bwb(e)],["set-effect-param",e=>this.g_bwc(e)],["remove-effects",e=>this.g_bwd(e)],["tick",e=>this.g_Ip(e)],["load-state",e=>this.g_bwe(e)]])}async g_bvO(e){e.isWKWebView&&(this.g_bvD=!0),this.g_brb=e.timeScaleMode,this.g_bre=["equalpower","HRTF","soundfield"][e.panningModel],this.g_brf=["linear","inverse","exponential"][e.distanceModel],this.g_bvC=e.refDistance,this.g_brk=e.maxDistance,this.g_brl=e.rolloffFactor;const g={latencyHint:e.latencyHint};if("undefined"!=typeof AudioContext)this.g_bvr=new AudioContext(g);else if("undefined"!=typeof webkitAudioContext)this.g_bvr=new webkitAudioContext(g);else throw new Error("Web Audio API not supported");this.g_bvs=this.g_bvr.createGain(),this.g_bvs.connect(this.g_bvr.destination);const _=e.listenerPos;this.g_bvr.listener.setPosition(_[0],_[1],_[2]),this.g_bvr.listener.setOrientation(0,0,1,0,-1,0),window.addEventListener("pointerup",this.g_bvu,!0),window.addEventListener("touchend",this.g_bvu,!0),window.addEventListener("click",this.g_bvu,!0),window.addEventListener("keydown",this.g_bvu,!0),self.C3_GetAudioContextCurrentTime=()=>this.g_bwf();try{await Promise.all(e.preloadList.map(e=>this.g_bwg(e.originalUrl,e.url,e.type,!1)))}catch(e){console.error("[Construct 3] Preloading sounds failed: ",e)}return{sampleRate:this.g_bvr.sampleRate}}g_bvv(){if(!this.g_bvt){const e=this.g_bvr;"suspended"===e.state&&e.resume&&e.resume();const g=e.createBuffer(1,220,22050),_=e.createBufferSource();_.buffer=g,_.connect(e.destination),_.start(0),"running"===e.state&&(this.g_bvt=!0,window.removeEventListener("pointerup",this.g_bvu,!0),window.removeEventListener("touchend",this.g_bvu,!0),window.removeEventListener("click",this.g_bvu,!0),window.removeEventListener("keydown",this.g_bvu,!0),this.g_bvu=null)}}g_bwh(){return this.g_bvr}g_bwf(){return this.g_bvr.currentTime}g_bwi(){return this.g_bvs}g_bwj(e){const g=this.g_bvG.get(e.toLowerCase());return g?g[0].g_bwk():this.g_bwi()}g_bwl(e,g){e=e.toLowerCase();let _=this.g_bvG.get(e);_||(_=[],this.g_bvG.set(e,_)),g.g_ajk(_.length),g.g_bwm(e),_.push(g),this.g_bwn(e)}g_bwn(e){let g=this.g_bwi();const _=this.g_bvG.get(e);if(_&&_.length){g=_[0].g_bwk();for(let e=0,g=_.length;e<g;++e){const t=_[e];e+1===g?t.g_bwo(this.g_bwi()):t.g_bwo(_[e+1].g_bwk())}}for(const _ of this.g_bwp(e))_.g_bwq(g);this.g_bvK&&this.g_bvJ===e&&(this.g_bvK.disconnect(),this.g_bvK.connect(g))}g_bwr(){return this.g_bro}g_bhw(){return this.g_aLl}g_bws(){return this.g_brb}g_Jh(){return this.g_ahD}g_EK(){return this.g_anQ}g_bwt(){return this.g_bvD}g_bwu(){return this.g_bvF}g_bwv(){this.g_bvE=!0}g_bww(){return this.g_bre}g_bwx(){return this.g_brf}g_bwy(){return this.g_bvC}g_bwz(){return this.g_brk}g_bwA(){return this.g_brl}g_bwB(e,g){return g?this.g_aov.g_adC(e).then(e=>{const g=this.g_bvr.createBuffer(1,e.length,48e3),_=g.getChannelData(0);return _.set(e),g}):new Promise((g,_)=>{this.g_bvr.decodeAudioData(e,g,_)})}g_aKJ(e){this.g_aov.g_aKJ(e)}g_aKK(e){this.g_aov.g_aKK(e)}g_bwC(g){let _=0;for(let t=0,e=this.g_bvx.length;t<e;++t){const a=this.g_bvx[t];this.g_bvx[_]=a,a.g_bwD()===g?a.g_em():++_}this.g_bvx.length=_}g_bwE(){let e=0;for(let g=0,_=this.g_bvw.length;g<_;++g){const _=this.g_bvw[g];this.g_bvw[e]=_,_.g_bwF()?_.g_em():++e}this.g_bvw.length=e}*g_bwp(g){if(g)for(const _ of this.g_bvx)e(_.g_bwG(),g)&&(yield _);else this.g_bvy&&!this.g_bvy.g_bwH()&&(yield this.g_bvy)}async g_bwg(g,_,t,a,n){for(const e of this.g_bvw)if(e.g_bwI()===_)return await e.g_AE(),e;if(n)return null;a&&(this.g_bvD||this.g_bvE)&&this.g_bwE();const e=g_bwJ.g_pB(this,g,_,t,a);return this.g_bvw.push(e),await e.g_AE(),e}async g_bwK(_,t,a,n,i){for(const e of this.g_bvx)if(e.g_bwI()===t&&(e.g_bwL()||i))return e.g_bwM(n),e;const e=await this.g_bwg(_,t,a,i),b=e.g_adR(n);return this.g_bvx.push(b),b}g_bwN(e){let g=this.g_bvB.get(e);if(!g){let _=null;const t=new Promise(e=>_=e);g={g_bwO:0,promise:t,resolve:_},this.g_bvB.set(e,g)}g.g_bwO++}g_bwP(e){const g=this.g_bvB.get(e);if(!g)throw new Error("expected pending tag");g.g_bwO--,0===g.g_bwO&&(g.resolve(),this.g_bvB.delete(e))}g_bwQ(e){e||(e=this.g_bvz);const g=this.g_bvB.get(e);return g?g.promise:Promise.resolve()}g_bwR(){if(0<this.g_bvH.size)return void this.g_abK();for(const e of this.g_bvx)if(e.g_VM())return void this.g_abK()}g_Jj(){for(const e of this.g_bvH)e.g_Jj();const e=this.g_bwf();for(const g of this.g_bvx)g.g_Jj(e);const g=this.g_bvx.filter(e=>e.g_VM()).map(e=>e.g_bwS());this.g_aJe("state",{tickCount:this.g_bvA,audioInstances:g,analysers:[...this.g_bvH].map(e=>e.g_bwT())}),0===g.length&&0===this.g_bvH.size&&this.g_abv()}g_bwU(e,g){this.g_aJe("trigger",{type:e,tag:g})}async g_bvP(_){const t=_.originalUrl,a=_.url,n=_.type,b=_.isMusic,e=_.tag,o=_.isLooping,g=_.vol,r=_.pos,i=_.panning;let s=_.off;if(0<s&&!_.trueClock)if(this.g_bvr.getOutputTimestamp){const e=this.g_bvr.getOutputTimestamp();s=s-e.performanceTime/1e3+e.contextTime}else s=s-performance.now()/1e3+this.g_bvr.currentTime;this.g_bvz=e,this.g_bwN(e);try{this.g_bvy=await this.g_bwK(t,a,n,e,b),i?(this.g_bvy.g_bwV(!0),this.g_bvy.g_bwW(i.x,i.y,i.angle,i.innerAngle,i.outerAngle,i.outerGain),i.hasOwnProperty("uid")&&this.g_bvy.g_bwX(i.uid)):this.g_bvy.g_bwV(!1),this.g_bvy.g_KS(o,g,r,s)}catch(e){return void console.error("[Construct 3] Audio: error starting playback: ",e)}finally{this.g_bwP(e)}this.g_abK()}g_btx(e){const g=e.tag;for(const _ of this.g_bwp(g))_.g_Iz()}g_bvQ(){for(const e of this.g_bvx)e.g_Iz()}g_bvR(e){const g=e.tag,_=e.paused;for(const t of this.g_bwp(g))_?t.g_bnB():t.g_KR();this.g_bwR()}g_bvS(e){const g=e.tag,_=e.vol;for(const t of this.g_bwp(g))t.g_bhG(_)}async g_bvT(g){const _=g.tag,t=g.vol,a=g.duration,n=g.stopOnEnd;await this.g_bwQ(_);for(const e of this.g_bwp(_))e.g_brK(t,a,n);this.g_bwR()}g_bvU(e){this.g_bro=e.vol;for(const g of this.g_bvx)g.g_bwY()}g_bvV(e){const g=e.tag,_=e.isMuted;for(const t of this.g_bwp(g))t.g_bhF(_)}g_bvW(e){this.g_aLl=e.isSilent,this.g_aov.g_aKM(this.g_aLl);for(const g of this.g_bvx)g.g_bwZ()}g_bvX(e){const g=e.tag,_=e.isLooping;for(const t of this.g_bwp(g))t.g_bhE(_)}g_bvY(e){const g=e.tag,_=e.rate;for(const t of this.g_bwp(g))t.g_Ke(_)}g_bvZ(e){const g=e.tag,_=e.pos;for(const t of this.g_bwp(g))t.g_bhL(_)}async g_bv_(g){const _=g.originalUrl,t=g.url,a=g.type,n=g.isMusic;try{await this.g_bwK(_,t,a,"",n)}catch(e){console.error("[Construct 3] Audio: error preloading: ",e)}}async g_F_(g){const _=g.url,t=g.type,a=g.isMusic,n=await this.g_bwg("",_,t,a,!0);if(n){n.g_em();const e=this.g_bvw.indexOf(n);-1!==e&&this.g_bvw.splice(e,1)}}g_bv$(){for(const e of this.g_bvw)e.g_em();this.g_bvw.length=0}g_bwa(e){const g=e.isSuspended;!g&&this.g_bvr.resume&&this.g_bvr.resume();for(const _ of this.g_bvx)_.g_api(g);g&&this.g_bvr.suspend&&this.g_bvr.suspend()}g_Ip(e){if(this.g_ahD=e.timeScale,this.g_anQ=e.gameTime,this.g_bvA=e.tickCount,0!==this.g_brb)for(const e of this.g_bvx)e.g_bw_();const g=e.listenerPos;g&&this.g_bvr.listener.setPosition(g[0],g[1],g[2]);for(const g of e.instPans){const e=g.uid;for(const _ of this.g_bvx)_.g_CJ()===e&&_.g_bw$(g.x,g.y,g.angle)}}async g_bwb(g){const _=g.type,t=g.tag,a=g.params;let n;if("filter"===_)n=new g_bxa(this,...a);else if("delay"===_)n=new g_bxb(this,...a);else if("convolution"===_){let e=null;try{e=await this.g_bwg(g.bufferOriginalUrl,g.bufferUrl,g.bufferType,!1)}catch(e){return void console.log("[Construct 3] Audio: error loading convolution: ",e)}n=new g_bxc(this,e.g_bxd(),...a),n.g_bxe(g.bufferOriginalUrl,g.bufferUrl,g.bufferType)}else if("flanger"===_)n=new g_bxf(this,...a);else if("phaser"===_)n=new g_bxg(this,...a);else if("gain"===_)n=new g_bxh(this,...a);else if("tremolo"===_)n=new g_bxi(this,...a);else if("ringmod"===_)n=new g_bxj(this,...a);else if("distortion"===_)n=new g_bxk(this,...a);else if("compressor"===_)n=new g_bxl(this,...a);else if("analyser"===_)n=new g_bxm(this,...a);else throw new Error("invalid effect type");this.g_bwl(t,n),this.g_bxn()}g_bwc(_){const t=_.tag,a=_.index,n=_.param,i=_.value,e=_.ramp,b=_.time,g=this.g_bvG.get(t);!g||0>a||a>=g.length||(g[a].g_bxo(n,i,e,b),this.g_bxn())}g_bwd(e){const g=e.tag.toLowerCase(),_=this.g_bvG.get(g);if(_&&_.length){for(const e of _)e.g_em();this.g_bvG.delete(g),this.g_bwn(g)}}g_bxp(e){this.g_bvH.add(e),this.g_bwR()}g_bxq(e){this.g_bvH.delete(e)}g_bxn(){this.g_bvI||(this.g_bvI=!0,Promise.resolve().then(()=>this.g_bxr()))}g_bxr(){const e={};for(const[g,_]of this.g_bvG)e[g]=_.map(e=>e.g_bwS());this.g_aJe("fxstate",{fxstate:e}),this.g_bvI=!1}async g_bwe(e){const g=e.saveLoadMode;if(3!==g)for(const e of this.g_bvx)e.g_bwF()&&1===g||!e.g_bwF()&&2===g||e.g_Iz();for(const g of this.g_bvG.values())for(const e of g)e.g_em();this.g_bvG.clear(),this.g_ahD=e.timeScale,this.g_anQ=e.gameTime;const _=e.listenerPos;this.g_bvr.listener.setPosition(_[0],_[1],_[2]),this.g_aLl=e.isSilent,this.g_aov.g_aKM(this.g_aLl),this.g_bro=e.masterVolume;const t=[];for(const g of Object.values(e.effects))t.push(Promise.all(g.map(e=>this.g_bwb(e))));await Promise.all(t),await Promise.all(e.playing.map(e=>this.g_bxs(e,g))),this.g_bwR()}async g_bxs(_,t){if(3===t)return;const a=_.bufferOriginalUrl,n=_.bufferUrl,b=_.bufferType,e=_.isMusic,o=_.tag,g=_.isLooping,r=_.volume,i=_.playbackTime;if(e&&1===t)return;if(!e&&2===t)return;let s=null;try{s=await this.g_bwK(a,n,b,o,e)}catch(e){return void console.error("[Construct 3] Audio: error loading audio state: ",e)}s.g_bxt(_.pan),s.g_KS(g,r,i,0),_.isPlaying||s.g_bnB(),s.g_bxu(_)}g_bvL(e,g){this.g_bvK&&this.g_bvK.disconnect(),this.g_bvJ=g.toLowerCase(),this.g_bvK=this.g_bvr.createMediaStreamSource(e),this.g_bvK.connect(this.g_bwj(this.g_bvJ))}g_bvN(){return this.g_bvM||(this.g_bvM=this.g_bvr.createMediaStreamDestination(),this.g_bvs.connect(this.g_bvM)),this.g_bvM.stream}};g_aJK.g_aKG(g)}"use strict",self.g_bwJ=class{constructor(g,_,t,a,n){this.g_bxv=g,this.g_bxw=_,this.g_Bd=t,this.g_ko=a,this.g_bxx=n,this.g_bxy="",this.g_bxz="not-loaded",this.g_Bi=null}g_em(){this.g_bxz="not-loaded",this.g_bxv=null,this.g_Bi=null}static g_pB(g,_,t,a,n){const e="audio/webm; codecs=opus"===a&&!g.g_bwu();return n&&e&&g.g_bwv(),!n||g.g_bwt()||e?new g_bxA(g,_,t,a,n,e):new g_bxB(g,_,t,a,n)}g_adR(e){return"html5"===this.g_bxy?new g_bxC(this.g_bxv,this,e):new g_bxD(this.g_bxv,this,e)}g_FU(){}g_AE(){return this.g_Bi||(this.g_Bi=this.g_FU()),this.g_Bi}g_Bj(){}g_bxE(){}g_bxF(){return"failed"===this.g_bxz}g_bwh(){return this.g_bxv.g_bwh()}g_bxG(){return this.g_bxy}g_bxH(){return this.g_bxw}g_bwI(){return this.g_Bd}g_bxI(){return this.g_ko}g_bwF(){return this.g_bxx}g_afz(){}},"use strict",self.g_bxB=class extends g_bwJ{constructor(g,_,t,a,n){super(g,_,t,a,n),this.g_bxy="html5",this.g_bxJ=new Audio,this.g_bxJ.crossOrigin="anonymous",this.g_bxJ.autoplay=!1,this.g_bxJ.preload="auto",this.g_bxK=null,this.g_bxL=null,this.g_bxM=!1,this.g_bxJ.addEventListener("canplaythrough",()=>this.g_bxM=!0),this.g_bxN=this.g_bwh().createGain(),this.g_bxO=null,this.g_bxJ.addEventListener("canplay",()=>{this.g_bxK&&(this.g_bxz="loaded",this.g_bxK(),this.g_bxK=null,this.g_bxL=null),this.g_bxO||!this.g_bxJ||(this.g_bxO=this.g_bwh().createMediaElementSource(this.g_bxJ),this.g_bxO.connect(this.g_bxN))}),this.onended=null,this.g_bxJ.addEventListener("ended",()=>{this.onended&&this.onended()}),this.g_bxJ.addEventListener("error",e=>this.g_aAT(e))}g_em(){this.g_bxv.g_bwC(this),this.g_bxN.disconnect(),this.g_bxN=null,this.g_bxO.disconnect(),this.g_bxO=null,this.g_bxJ&&!this.g_bxJ.paused&&this.g_bxJ.pause(),this.onended=null,this.g_bxJ=null,super.g_em()}g_FU(){return this.g_bxz="loading",new Promise((e,g)=>{this.g_bxK=e,this.g_bxL=g,this.g_bxJ.src=this.g_Bd})}g_aAT(e){console.error(`[Construct 3] Audio '${this.g_Bd}' error: `,e),this.g_bxL&&(this.g_bxz="failed",this.g_bxL(e),this.g_bxK=null,this.g_bxL=null)}g_Bj(){const e=4<=this.g_bxJ.readyState;return e&&(this.g_bxM=!0),e||this.g_bxM}g_bxE(){return this.g_Bj()}g_bxP(){return this.g_bxJ}g_bxQ(){return this.g_bxN}g_afz(){return this.g_bxJ.duration}},"use strict",self.g_bxA=class extends g_bwJ{constructor(g,_,t,a,n,e){super(g,_,t,a,n),this.g_bxy="webaudio",this.g_bxR=null,this.g_bxS=null,this.g_bxT=!!e}g_em(){this.g_bxv.g_bwC(this),this.g_bxR=null,this.g_bxS=null,super.g_em()}async g_bxU(){if(this.g_bxR)return this.g_bxR;const e=this.g_bxv.g_aJo();if("cordova"===e.g_apV()&&e.g_fT(this.g_Bd))this.g_bxR=await e.g_As(this.g_Bd);else{const e=await fetch(this.g_Bd);if(!e.ok)throw new Error(`error fetching audio data: ${e.status} ${e.statusText}`);this.g_bxR=await e.arrayBuffer()}}async g_bxV(){return this.g_bxS?this.g_bxS:void(this.g_bxS=await this.g_bxv.g_bwB(this.g_bxR,this.g_bxT),this.g_bxR=null)}async g_FU(){try{this.g_bxz="loading",await this.g_bxU(),await this.g_bxV(),this.g_bxz="loaded"}catch(e){this.g_bxz="failed",console.error(`[Construct 3] Failed to load audio '${this.g_Bd}': `,e)}}g_Bj(){return!!(this.g_bxR||this.g_bxS)}g_bxE(){return!!this.g_bxS}g_bxd(){return this.g_bxS}g_afz(){return this.g_bxS?this.g_bxS.duration:0}},"use strict";{function _(g){return g*e}const e=180/Math.PI;self.g_bxW=class{constructor(e,g,_){this.g_bxv=e,this.g_vg=g,this.g_bxX=_,this.g_bxY=this.g_bwh().createGain(),this.g_bxY.connect(this.g_bwi()),this.g_bxZ=null,this.g_bx_=!1,this.g_Sw=!0,this.g_bx$=!1,this.g_bya=!1,this.g_ZD=!1,this.g_byb=1,this.g_byc=!1,this.g_Jw=1;const t=this.g_bxv.g_bws();this.g_byd=1===t&&!this.g_bwF()||2===t,this.g_bye=-1,this.g_byf=-1,this.g_byg=!1}g_em(){this.g_bxv=null,this.g_vg=null,this.g_bxZ&&(this.g_bxZ.disconnect(),this.g_bxZ=null),this.g_bxY.disconnect(),this.g_bxY=null}g_bwh(){return this.g_bxv.g_bwh()}g_bwi(){return this.g_bxv.g_bwj(this.g_bxX)}g_bwr(){return this.g_bxv.g_bwr()}g_byh(){return this.g_byd?this.g_bxv.g_EK():performance.now()/1e3}g_bxH(){return this.g_vg.g_bxH()}g_bwI(){return this.g_vg.g_bwI()}g_bxI(){return this.g_vg.g_bxI()}g_bwD(){return this.g_vg}g_bwF(){return this.g_vg.g_bwF()}g_bwM(e){this.g_bxX=e}g_bwG(){return this.g_bxX}g_bwH(){}g_bwL(){}g_Kh(){return!this.g_Sw&&!this.g_bx$&&!this.g_bwH()}g_VM(){return!this.g_Sw&&!this.g_bwH()}g_byi(){}g_afz(e){let g=this.g_vg.g_afz();return e&&(g/=this.g_Jw||.001),g}g_KS(){}g_Iz(){}g_bnB(){}g_byj(){return this.g_bx$}g_KR(){}g_bhG(e){this.g_byb=e,this.g_bxY.gain.cancelScheduledValues(0),this.g_byf=-1,this.g_bxY.gain.value=this.g_byk()}g_brK(g,_,t){if(!this.g_byl()){g*=this.g_bwr();const a=this.g_bxY.gain;a.cancelScheduledValues(0);const n=this.g_bxv.g_bwf(),e=n+_;a.setValueAtTime(this.g_byk(),n),a.linearRampToValueAtTime(g,e),this.g_byb=g,this.g_byf=e,this.g_byg=t}}g_bwY(){this.g_bhG(this.g_byb)}g_Jj(e){-1!==this.g_byf&&e>=this.g_byf&&(this.g_byf=-1,this.g_byg&&this.g_Iz(),this.g_bxv.g_bwU("fade-ended",this.g_bxX))}g_byk(){const e=this.g_byb*this.g_bwr();return isFinite(e)?e:0}g_bhF(e){e=!!e,this.g_byc===e||(this.g_byc=e,this.g_bwZ())}g_byl(){return this.g_byc}g_bhw(){return this.g_bxv.g_bhw()}g_bwZ(){}g_bhE(){}g_Xs(){return this.g_ZD}g_Ke(e){this.g_Jw===e||(this.g_Jw=e,this.g_bw_())}g_bw_(){}g_Kf(){return this.g_Jw}g_bhL(){}g_api(){}g_bwV(e){e=!!e,this.g_bx_===e||(this.g_bx_=e,this.g_bx_?(!this.g_bxZ&&(this.g_bxZ=this.g_bwh().createPanner(),this.g_bxZ.panningModel=this.g_bxv.g_bww(),this.g_bxZ.distanceModel=this.g_bxv.g_bwx(),this.g_bxZ.refDistance=this.g_bxv.g_bwy(),this.g_bxZ.maxDistance=this.g_bxv.g_bwz(),this.g_bxZ.rolloffFactor=this.g_bxv.g_bwA()),this.g_bxY.disconnect(),this.g_bxY.connect(this.g_bxZ),this.g_bxZ.connect(this.g_bwi())):(this.g_bxZ.disconnect(),this.g_bxY.disconnect(),this.g_bxY.connect(this.g_bwi())))}g_bwW(t,a,n,i,e,b){this.g_bx_&&(this.g_bw$(t,a,n),this.g_bxZ.coneInnerAngle=_(i),this.g_bxZ.coneOuterAngle=_(e),this.g_bxZ.coneOuterGain=b)}g_bw$(e,g,_){this.g_bx_&&(this.g_bxZ.setPosition(e,g,0),this.g_bxZ.setOrientation(Math.cos(_),Math.sin(_),0))}g_bwX(e){this.g_bye=e}g_CJ(){return this.g_bye}g_bym(){}g_bwq(e){const g=this.g_bxZ||this.g_bxY;g.disconnect(),g.connect(e)}g_bwS(){return{tag:this.g_bxX,duration:this.g_afz(),volume:this.g_byb,isPlaying:this.g_Kh(),playbackTime:this.g_byi(),playbackRate:this.g_Kf(),uid:this.g_bye,bufferOriginalUrl:this.g_bxH(),bufferUrl:"",bufferType:this.g_bxI(),isMusic:this.g_bwF(),isLooping:this.g_Xs(),isMuted:this.g_byl(),resumePosition:this.g_bym(),pan:this.g_byn()}}g_bxu(e){this.g_Ke(e.playbackRate),this.g_bhF(e.isMuted)}g_byn(){if(!this.g_bxZ)return null;const e=this.g_bxZ;return{pos:[e.positionX.value,e.positionY.value,e.positionZ.value],orient:[e.orientationX.value,e.orientationY.value,e.orientationZ.value],cia:e.coneInnerAngle,coa:e.coneOuterAngle,cog:e.coneOuterGain,uid:this.g_bye}}g_bxt(e){if(!e)return void this.g_bwV(!1);this.g_bwV(!0);const g=this.g_bxZ;g.setPosition(...g.pos),g.setOrientation(...g.orient),g.coneInnerAngle=g.cia,g.coneOuterAngle=g.coa,g.coneOuterGain=g.cog,this.g_bye=g.uid}}}"use strict",self.g_bxC=class extends g_bxW{constructor(e,g,_){super(e,g,_),this.g_vg.g_bxQ().connect(this.g_bxY),this.g_vg.onended=()=>this.g_byo()}g_em(){this.g_Iz(),this.g_vg.g_bxQ().disconnect(),super.g_em()}g_bxP(){return this.g_vg.g_bxP()}g_byo(){this.g_Sw=!0,this.g_bye=-1,this.g_bxv.g_bwU("ended",this.g_bxX)}g_bwH(){return this.g_bxP().ended}g_bwL(){return!!this.g_Sw||this.g_bwH()}g_byi(e){let g=this.g_bxP().currentTime;return e&&(g*=this.g_Jw),this.g_ZD||(g=Math.min(g,this.g_afz())),g}g_KS(e,g,_){const t=this.g_bxP();if(1!==t.playbackRate&&(t.playbackRate=1),t.loop!==e&&(t.loop=e),this.g_bhG(g),t.muted&&(t.muted=!1),t.currentTime!==_)try{t.currentTime=_}catch(e){console.warn(`[Construct 3] Exception seeking audio '${this.g_vg.g_bwI()}' to position '${_}': `,e)}this.g_bxv.g_aKJ(t),this.g_Sw=!1,this.g_bx$=!1,this.g_ZD=e,this.g_Jw=1}g_Iz(){const e=this.g_bxP();e.paused||e.pause(),this.g_bxv.g_aKK(e),this.g_Sw=!0,this.g_bx$=!1,this.g_bye=-1}g_bnB(){if(!(this.g_bx$||this.g_Sw||this.g_bwH())){const e=this.g_bxP();e.paused||e.pause(),this.g_bxv.g_aKK(e),this.g_bx$=!0}}g_KR(){!this.g_bx$||this.g_Sw||this.g_bwH()||(this.g_bxv.g_aKJ(this.g_bxP()),this.g_bx$=!1)}g_bwZ(){this.g_bxP().muted=this.g_byc||this.g_bhw()}g_bhE(e){e=!!e,this.g_ZD===e||(this.g_ZD=e,this.g_bxP().loop=e)}g_bw_(){let e=this.g_Jw;this.g_byd&&(e*=this.g_bxv.g_Jh());try{this.g_bxP().playbackRate=e}catch(g){console.warn(`[Construct 3] Unable to set playback rate '${e}':`,g)}}g_bhL(e){if(!(this.g_Sw||this.g_bwH()))try{this.g_bxP().currentTime=e}catch(g){console.warn(`[Construct 3] Error seeking audio to '${e}': `,g)}}g_bym(){return this.g_byi()}g_api(e){e?this.g_Kh()?(this.g_bxP().pause(),this.g_bya=!0):this.g_bya=!1:this.g_bya&&(this.g_bxv.g_aKJ(this.g_bxP()),this.g_bya=!1)}},"use strict",self.g_bxD=class extends g_bxW{constructor(e,g,_){super(e,g,_),this.g_byp=null,this.g_byq=e=>this.g_byo(e),this.g_byr=!0,this.g_bys=null,this.g_anL=0,this.g_byt=0,this.g_byu=1}g_em(){this.g_Iz(),this.g_byv(),this.g_byq=null,super.g_em()}g_byv(){this.g_byp&&this.g_byp.disconnect(),this.g_byp=null,this.g_bys=null}g_byo(e){this.g_bx$||this.g_bya||e.target!==this.g_bys||(this.g_byr=!0,this.g_Sw=!0,this.g_bye=-1,this.g_byv(),this.g_bxv.g_bwU("ended",this.g_bxX))}g_bwH(){return!(!this.g_Sw&&this.g_byp&&this.g_byp.loop)&&!this.g_bx$&&this.g_byr}g_bwL(){return!this.g_byp||this.g_Sw||this.g_bwH()}g_byi(e){let g=0;return g=this.g_bx$?this.g_byt:this.g_byh()-this.g_anL,e&&(g*=this.g_Jw),this.g_ZD||(g=Math.min(g,this.g_afz())),g}g_KS(e,g,_,t){this.g_byu=1,this.g_bhG(g),this.g_byv(),this.g_byp=this.g_bwh().createBufferSource(),this.g_byp.buffer=this.g_vg.g_bxd(),this.g_byp.connect(this.g_bxY),this.g_bys=this.g_byp,this.g_byp.onended=this.g_byq,this.g_byp.loop=e,this.g_byp.start(t,_),this.g_byr=!1,this.g_Sw=!1,this.g_bx$=!1,this.g_ZD=e,this.g_Jw=1,this.g_anL=this.g_byh()-_}g_Iz(){this.g_byp&&this.g_byp.stop(0),this.g_Sw=!0,this.g_bx$=!1,this.g_bye=-1}g_bnB(){this.g_bx$||this.g_Sw||this.g_bwH()||(this.g_byt=this.g_byi(!0),this.g_ZD&&(this.g_byt%=this.g_afz()),this.g_bx$=!0,this.g_byp.stop(0))}g_KR(){!this.g_bx$||this.g_Sw||this.g_bwH()||(this.g_byv(),this.g_byp=this.g_bwh().createBufferSource(),this.g_byp.buffer=this.g_vg.g_bxd(),this.g_byp.connect(this.g_bxY),this.g_bys=this.g_byp,this.g_byp.onended=this.g_byq,this.g_byp.loop=this.g_ZD,this.g_bwY(),this.g_bw_(),this.g_anL=this.g_byh()-this.g_byt/(this.g_Jw||.001),this.g_byp.start(0,this.g_byt),this.g_bx$=!1)}g_byk(){return super.g_byk()*this.g_byu}g_bwZ(){this.g_byu=this.g_byc||this.g_bhw()?0:1,this.g_bwY()}g_bhE(e){e=!!e,this.g_ZD===e||(this.g_ZD=e,this.g_byp&&(this.g_byp.loop=e))}g_bw_(){let e=this.g_Jw;this.g_byd&&(e*=this.g_bxv.g_Jh()),this.g_byp&&(this.g_byp.playbackRate.value=e)}g_bhL(e){this.g_Sw||this.g_bwH()||(this.g_bx$?this.g_byt=e:(this.g_bnB(),this.g_byt=e,this.g_KR()))}g_bym(){return this.g_byt}g_api(e){e?this.g_Kh()?(this.g_bya=!0,this.g_byt=this.g_byi(!0),this.g_ZD&&(this.g_byt%=this.g_afz()),this.g_byp.stop(0)):this.g_bya=!1:this.g_bya&&(this.g_byv(),this.g_byp=this.g_bwh().createBufferSource(),this.g_byp.buffer=this.g_vg.g_bxd(),this.g_byp.connect(this.g_bxY),this.g_bys=this.g_byp,this.g_byp.onended=this.g_byq,this.g_byp.loop=this.g_ZD,this.g_bwY(),this.g_bw_(),this.g_anL=this.g_byh()-this.g_byt/(this.g_Jw||.001),this.g_byp.start(0,this.g_byt),this.g_bya=!1)}g_bxu(e){super.g_bxu(e),this.g_byt=e.resumePosition}},"use strict";{function g(e){return Math.pow(10,e/20)}function _(e){return Math.max(Math.min(g(e),1),0)}function t(e){return 20*(Math.log(e)/2.302585092994046)}function n(e){return t(Math.max(Math.min(e,1),0))}function i(e,g){return 1-Math.exp(-g*e)}class e{constructor(e){this.g_bxv=e,this.g_bvr=e.g_bwh(),this.g_BS=-1,this.g_bxX="",this.g_ko="",this.g_byw=null}g_em(){this.g_bvr=null}g_ajk(e){this.g_BS=e}g_Dl(){return this.g_BS}g_bwm(e){this.g_bxX=e}g_bwG(){return this.g_bxX}g_byx(){return this.g_bvr.createGain()}g_bwk(){}g_bwo(){}g_byy(g,_,t,a){if(g.cancelScheduledValues(0),0===a)return void(g.value=_);const n=this.g_bvr.currentTime;a+=n,0===t?g.setValueAtTime(_,a):1===t?(g.setValueAtTime(g.value,n),g.linearRampToValueAtTime(_,a)):2===t?(g.setValueAtTime(g.value,n),g.exponentialRampToValueAtTime(_,a)):void 0}g_bwS(){return{type:this.g_ko,tag:this.g_bxX,params:this.g_byw}}}self.g_bxa=class extends e{constructor(_,t,a,n,i,e,b){super(_),this.g_ko="filter",this.g_byw=[t,a,n,i,e,b],this.g_byz=this.g_byx(),this.g_byA=this.g_byx(),this.g_byA.gain.value=b,this.g_byB=this.g_byx(),this.g_byB.gain.value=1-b,this.g_byC=this.g_bvr.createBiquadFilter(),this.g_byC.type=t,this.g_byC.frequency.value=a,this.g_byC.detune.value=n,this.g_byC.Q.value=i,this.g_byC.gain.vlaue=e,this.g_byz.connect(this.g_byC),this.g_byz.connect(this.g_byB),this.g_byC.connect(this.g_byA)}g_em(){this.g_byz.disconnect(),this.g_byC.disconnect(),this.g_byA.disconnect(),this.g_byB.disconnect(),super.g_em()}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[5]=g,this.g_byy(this.g_byA.gain,g,_,t),this.g_byy(this.g_byB.gain,1-g,_,t)):1===e?(this.g_byw[1]=g,this.g_byy(this.g_byC.frequency,g,_,t)):2===e?(this.g_byw[2]=g,this.g_byy(this.g_byC.detune,g,_,t)):3===e?(this.g_byw[3]=g,this.g_byy(this.g_byC.Q,g,_,t)):4===e?(this.g_byw[4]=g,this.g_byy(this.g_byC.gain,g,_,t)):void 0}},self.g_bxb=class extends e{constructor(e,g,_,t){super(e),this.g_ko="delay",this.g_byw=[g,_,t],this.g_byz=this.g_byx(),this.g_byA=this.g_byx(),this.g_byA.gain.value=t,this.g_byB=this.g_byx(),this.g_byB.gain.value=1-t,this.g_byD=this.g_byx(),this.g_byE=this.g_bvr.createDelay(g),this.g_byE.delayTime.value=g,this.g_byF=this.g_byx(),this.g_byF.gain.value=_,this.g_byz.connect(this.g_byD),this.g_byz.connect(this.g_byB),this.g_byD.connect(this.g_byA),this.g_byD.connect(this.g_byE),this.g_byE.connect(this.g_byF),this.g_byF.connect(this.g_byD)}g_em(){this.g_byz.disconnect(),this.g_byA.disconnect(),this.g_byB.disconnect(),this.g_byD.disconnect(),this.g_byE.disconnect(),this.g_byF.disconnect(),super.g_em()}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(g,t,a,n){0===g?(t=Math.max(Math.min(t/100,1),0),this.g_byw[2]=t,this.g_byy(this.g_byA.gain,t,a,n),this.g_byy(this.g_byB.gain,1-t,a,n)):4===g?(this.g_byw[1]=_(t),this.g_byy(this.g_byF.gain,_(t),a,n)):5===g?(this.g_byw[0]=t,this.g_byy(this.g_byE.delayTime,t,a,n)):void 0}},self.g_bxc=class extends e{constructor(e,g,_,t){super(e),this.g_ko="convolution",this.g_byw=[_,t],this.g_byG="",this.g_byH="",this.g_byI="",this.g_byz=this.g_byx(),this.g_byA=this.g_byx(),this.g_byA.gain.value=t,this.g_byB=this.g_byx(),this.g_byB.gain.value=1-t,this.g_byJ=this.g_bvr.createConvolver(),this.g_byJ.normalize=_,this.g_byJ.buffer=g,this.g_byz.connect(this.g_byJ),this.g_byz.connect(this.g_byB),this.g_byJ.connect(this.g_byA)}g_em(){this.g_byz.disconnect(),this.g_byJ.disconnect(),this.g_byA.disconnect(),this.g_byB.disconnect(),super.g_em()}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[1]=g,this.g_byy(this.g_byA.gain,g,_,t),this.g_byy(this.g_byB.gain,1-g,_,t)):void 0}g_bxe(e,g,_){this.g_byG=e,this.g_byH=g,this.g_byI=_}g_bwS(){const e=super.g_bwS();return e.bufferOriginalUrl=this.g_byG,e.bufferUrl="",e.bufferType=this.g_byI,e}},self.g_bxf=class extends e{constructor(g,_,t,a,n,e){super(g),this.g_ko="flanger",this.g_byw=[_,t,a,n,e],this.g_byz=this.g_byx(),this.g_byB=this.g_byx(),this.g_byB.gain.value=1-e/2,this.g_byA=this.g_byx(),this.g_byA.gain.value=e/2,this.g_byK=this.g_byx(),this.g_byK.gain.value=n,this.g_byE=this.g_bvr.createDelay(_+t),this.g_byE.delayTime.value=_,this.g_byL=this.g_bvr.createOscillator(),this.g_byL.frequency.value=a,this.g_byM=this.g_byx(),this.g_byM.gain.value=t,this.g_byz.connect(this.g_byE),this.g_byz.connect(this.g_byB),this.g_byE.connect(this.g_byA),this.g_byE.connect(this.g_byK),this.g_byK.connect(this.g_byE),this.g_byL.connect(this.g_byM),this.g_byM.connect(this.g_byE.delayTime),this.g_byL.start(0)}g_em(){this.g_byL.stop(0),this.g_byz.disconnect(),this.g_byE.disconnect(),this.g_byL.disconnect(),this.g_byM.disconnect(),this.g_byB.disconnect(),this.g_byA.disconnect(),this.g_byK.disconnect(),super.g_em()}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[4]=g,this.g_byy(this.g_byA.gain,g/2,_,t),this.g_byy(this.g_byB.gain,1-g/2,_,t)):6===e?(this.g_byw[1]=g/1e3,this.g_byy(this.g_byM.gain,g/1e3,_,t)):7===e?(this.g_byw[2]=g,this.g_byy(this.g_byL.frequency,g,_,t)):8===e?(this.g_byw[3]=g/100,this.g_byy(this.g_byK.gain,g/100,_,t)):void 0}},self.g_bxg=class extends e{constructor(_,t,a,n,i,e,b){super(_),this.g_ko="phaser",this.g_byw=[t,a,n,i,e,b],this.g_byz=this.g_byx(),this.g_byB=this.g_byx(),this.g_byB.gain.value=1-b/2,this.g_byA=this.g_byx(),this.g_byA.gain.value=b/2,this.g_byC=this.g_bvr.createBiquadFilter(),this.g_byC.type="allpass",this.g_byC.frequency.value=t,this.g_byC.detune.value=a,this.g_byC.Q.value=n,this.g_byL=this.g_bvr.createOscillator(),this.g_byL.frequency.value=e,this.g_byM=this.g_byx(),this.g_byM.gain.value=i,this.g_byz.connect(this.g_byC),this.g_byz.connect(this.g_byB),this.g_byC.connect(this.g_byA),this.g_byL.connect(this.g_byM),this.g_byM.connect(this.g_byC.frequency),this.g_byL.start(0)}g_em(){this.g_byL.stop(0),this.g_byz.disconnect(),this.g_byC.disconnect(),this.g_byL.disconnect(),this.g_byM.disconnect(),this.g_byB.disconnect(),this.g_byA.disconnect(),super.g_em()}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[5]=g,this.g_byy(this.g_byA.gain,g/2,_,t),this.g_byy(this.g_byB.gain,1-g/2,_,t)):1===e?(this.g_byw[0]=g,this.g_byy(this.g_byC.frequency,g,_,t)):2===e?(this.g_byw[1]=g,this.g_byy(this.g_byC.detune,g,_,t)):3===e?(this.g_byw[2]=g,this.g_byy(this.g_byC.Q,g,_,t)):6===e?(this.g_byw[3]=g,this.g_byy(this.g_byM.gain,g,_,t)):7===e?(this.g_byw[4]=g,this.g_byy(this.g_byL.frequency,g,_,t)):void 0}},self.g_bxh=class extends e{constructor(e,g){super(e),this.g_ko="gain",this.g_byw=[g],this.g_byN=this.g_byx(),this.g_byN.gain.value=g}g_em(){this.g_byN.disconnect(),super.g_em()}g_bwo(e){this.g_byN.disconnect(),this.g_byN.connect(e)}g_bwk(){return this.g_byN}g_bxo(g,t,a,n){4===g?(this.g_byw[0]=_(t),this.g_byy(this.g_byN.gain,_(t),a,n)):void 0}},self.g_bxi=class extends e{constructor(e,g,_){super(e),this.g_ko="tremolo",this.g_byw=[g,_],this.g_byN=this.g_byx(),this.g_byN.gain.value=1-_/2,this.g_byL=this.g_bvr.createOscillator(),this.g_byL.frequency.value=g,this.g_byM=this.g_byx(),this.g_byM.gain.value=_/2,this.g_byL.connect(this.g_byM),this.g_byM.connect(this.g_byN.gain),this.g_byL.start(0)}g_em(){this.g_byL.stop(0),this.g_byL.disconnect(),this.g_byM.disconnect(),this.g_byN.disconnect(),super.g_em()}g_bwo(e){this.g_byN.disconnect(),this.g_byN.connect(e)}g_bwk(){return this.g_byN}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[1]=g,this.g_byy(this.g_byN.gain.value,1-g/2,_,t),this.g_byy(this.g_byM.gain.value,g/2,_,t)):7===e?(this.g_byw[0]=g,this.g_byy(this.g_byL.frequency,g,_,t)):void 0}},self.g_bxj=class extends e{constructor(e,g,_){super(e),this.g_ko="ringmod",this.g_byw=[g,_],this.g_byz=this.g_byx(),this.g_byA=this.g_byx(),this.g_byA.gain.value=_,this.g_byB=this.g_byx(),this.g_byB.gain.value=1-_,this.g_byO=this.g_byx(),this.g_byO.gain.value=0,this.g_byL=this.g_bvr.createOscillator(),this.g_byL.frequency.value=g,this.g_byL.connect(this.g_byO.gain),this.g_byL.start(0),this.g_byz.connect(this.g_byO),this.g_byz.connect(this.g_byB),this.g_byO.connect(this.g_byA)}g_em(){this.g_byL.stop(0),this.g_byL.disconnect(),this.g_byO.disconnect(),this.g_byz.disconnect(),this.g_byA.disconnect(),this.g_byB.disconnect(),super.g_em()}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[1]=g,this.g_byy(this.g_byA.gain,g,_,t),this.g_byy(this.g_byB.gain,1-g,_,t)):7===e?(this.g_byw[0]=g,this.g_byy(this.g_byL.frequency,g,_,t)):void 0}},self.g_bxk=class extends e{constructor(g,_,t,a,n,e){super(g),this.g_ko="distortion",this.g_byw=[_,t,a,n,e],this.g_byz=this.g_byx(),this.g_byP=this.g_byx(),this.g_byQ=this.g_byx(),this.g_byR(a,n),this.g_byA=this.g_byx(),this.g_byA.gain.value=e,this.g_byB=this.g_byx(),this.g_byB.gain.value=1-e,this.g_byS=this.g_bvr.createWaveShaper(),this.g_byT=new Float32Array(65536),this.g_byU(_,t),this.g_byS.curve=this.g_byT,this.g_byz.connect(this.g_byP),this.g_byz.connect(this.g_byB),this.g_byP.connect(this.g_byS),this.g_byS.connect(this.g_byQ),this.g_byQ.connect(this.g_byA)}g_em(){this.g_byz.disconnect(),this.g_byP.disconnect(),this.g_byS.disconnect(),this.g_byQ.disconnect(),this.g_byA.disconnect(),this.g_byB.disconnect(),super.g_em()}g_byR(e,g){.01>e&&(e=.01),this.g_byP.gain.value=e,this.g_byQ.gain.value=Math.pow(1/e,.6)*g}g_byU(e,g){for(let _,t=0;32768>t;++t)_=t/32768,_=this.g_byV(_,e,g),this.g_byT[32768+t]=_,this.g_byT[32768-t-1]=-_}g_byV(e,_,t){const a=1.05*t*_-_,n=0>e?-1:1,b=0>e?-e:e;let g=b<_?b:_+a*i(b-_,1/a);return g*=n,g}g_bwo(e){this.g_byA.disconnect(),this.g_byA.connect(e),this.g_byB.disconnect(),this.g_byB.connect(e)}g_bwk(){return this.g_byz}g_bxo(e,g,_,t){0===e?(g=Math.max(Math.min(g/100,1),0),this.g_byw[4]=g,this.g_byy(this.g_byA.gain,g,_,t),this.g_byy(this.g_byB.gain,1-g,_,t)):void 0}},self.g_bxl=class extends e{constructor(g,_,t,a,n,e){super(g),this.g_ko="compressor",this.g_byw=[_,t,a,n,e],this.g_byN=this.g_bvr.createDynamicsCompressor(),this.g_byN.threshold.value=_,this.g_byN.knee.value=t,this.g_byN.ratio.value=a,this.g_byN.attack.value=n,this.g_byN.release.value=e}g_em(){this.g_byN.disconnect(),super.g_em()}g_bwo(e){this.g_byN.disconnect(),this.g_byN.connect(e)}g_bwk(){return this.g_byN}g_bxo(){}},self.g_bxm=class extends e{constructor(e,g,_){super(e),this.g_ko="analyser",this.g_byw=[g,_],this.g_byN=this.g_bvr.createAnalyser(),this.g_byN.fftSize=g,this.g_byN.smoothingTimeConstant=_,this.g_byW=new Float32Array(this.g_byN.frequencyBinCount),this.g_byX=new Uint8Array(g),this.g_byY=0,this.g_byZ=0,this.g_bxv.g_bxp(this)}g_em(){this.g_bxv.g_bxq(this),this.g_byN.disconnect(),super.g_em()}g_Jj(){this.g_byN.getFloatFrequencyData(this.g_byW),this.g_byN.getByteTimeDomainData(this.g_byX);const e=this.g_byN.fftSize;this.g_byY=0;let g=0;for(let _,t=0;t<e;++t)_=(this.g_byX[t]-128)/128,0>_&&(_=-_),this.g_byY<_&&(this.g_byY=_),g+=_*_;this.g_byY=n(this.g_byY),this.g_byZ=n(Math.sqrt(g/e))}g_bwo(e){this.g_byN.disconnect(),this.g_byN.connect(e)}g_bwk(){return this.g_byN}g_bxo(){}g_bwT(){return{tag:this.g_bwG(),index:this.g_Dl(),peak:this.g_byY,rms:this.g_byZ,binCount:this.g_byN.frequencyBinCount,freqBins:this.g_byW}}}}{const e=class extends g_aJa{constructor(e){super(e,"touch"),this.g_aJl("request-permission",e=>this.g_aLD(e))}async g_aLD(e){const g=e.type;let _=!0;0===g?_=await this.g_aLE():1===g&&(_=await this.g_aLF()),this.g_aJe("permission-result",{type:g,result:_})}async g_aLE(){if(!self.DeviceOrientationEvent||!self.DeviceOrientationEvent.requestPermission)return!0;try{const e=await self.DeviceOrientationEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request orientation permission: ",e),!1}}async g_aLF(){if(!self.DeviceMotionEvent||!self.DeviceMotionEvent.requestPermission)return!0;try{const e=await self.DeviceMotionEvent.requestPermission();return"granted"===e}catch(e){return console.warn("[Touch] Failed to request motion permission: ",e),!1}}};g_aJK.g_aKG(e)}{function g(e){e.stopPropagation()}function _(e){13!==e.which&&27!==e.which&&e.stopPropagation()}const e=class extends g_aJs{constructor(e){super(e,"text-input"),this.g_aJD("scroll-to-bottom",e=>this.g_aLG(e))}g_aci(t,a){let n;const i=a.type;return"textarea"===i?(n=document.createElement("textarea"),n.style.resize="none"):(n=document.createElement("input"),n.type=i),n.style.position="absolute",n.autocomplete="off",n.addEventListener("touchstart",g),n.addEventListener("touchmove",g),n.addEventListener("touchend",g),n.addEventListener("mousedown",g),n.addEventListener("mouseup",g),n.addEventListener("keydown",_),n.addEventListener("keyup",_),n.addEventListener("click",e=>{e.stopPropagation(),this.g_aJG("click",t)}),n.addEventListener("dblclick",e=>{e.stopPropagation(),this.g_aJG("dblclick",t)}),n.addEventListener("input",()=>this.g_aJF("change",t,{text:n.value})),n.id=a.id,this.g_aJH(n,a),n}g_aJH(e,g){e.value=g.text,e.placeholder=g.placeholder,e.title=g.title,e.disabled=!g.isEnabled,e.readOnly=g.isReadOnly,e.spellcheck=g.spellCheck}g_aLG(e){e.scrollTop=e.scrollHeight}};g_aJK.g_aKG(e)}{const e=class extends g_aJa{constructor(e){super(e,"browser"),this.g_amE="",this.g_aJl("get-initial-state",e=>this.g_aLH(e)),this.g_aJl("ready-for-sw-messages",()=>this.g_aLI()),this.g_aJl("alert",e=>this.g_aLJ(e)),this.g_aJl("close",()=>this.g_aLK()),this.g_aJl("set-focus",e=>this.g_aJA(e)),this.g_aJl("vibrate",e=>this.g_aLL(e)),this.g_aJl("lock-orientation",e=>this.g_aLM(e)),this.g_aJl("unlock-orientation",()=>this.g_aLN()),this.g_aJl("navigate",e=>this.g_aLO(e)),this.g_aJl("request-fullscreen",e=>this.g_aLP(e)),this.g_aJl("exit-fullscreen",()=>this.g_aLQ()),window.addEventListener("online",()=>this.g_aBq(!0)),window.addEventListener("offline",()=>this.g_aBq(!1)),document.addEventListener("backbutton",()=>this.g_aLR()),"undefined"!=typeof Windows&&Windows.UI.Core.SystemNavigationManager.getForCurrentView().addEventListener("backrequested",e=>this.g_aLS(e))}g_aLH(e){return this.g_amE=e.exportType,{location:location.toString(),isOnline:!!navigator.onLine,referrer:document.referrer,title:document.title,isCookieEnabled:!!navigator.cookieEnabled,screenWidth:screen.width,screenHeight:screen.height,windowOuterWidth:window.outerWidth,windowOuterHeight:window.outerHeight,isScirraArcade:"undefined"!=typeof window.is_scirra_arcade}}g_aLI(){window.C3_RegisterSW&&window.OfflineClientInfo&&window.OfflineClientInfo.SetMessageCallback(e=>this.g_aJe("sw-message",e.data))}g_aBq(e){this.g_aJe("online-state",{isOnline:e})}g_aLR(){this.g_aJe("backbutton")}g_aLS(e){e.handled=!0,this.g_aJe("backbutton")}g_aLT(){return"nwjs"===this.g_amE?nw.Window.get():null}g_aLJ(e){alert(e.message)}g_aLK(){navigator.app&&navigator.app.exitApp?navigator.app.exitApp():navigator.device&&navigator.device.exitApp?navigator.device.exitApp():window.close()}g_aJA(e){const g=e.isFocus;if("nwjs"===this.g_amE){const e=this.g_aLT();g?e.focus():e.blur()}else g?window.focus():window.blur()}g_aLL(e){navigator.vibrate&&navigator.vibrate(e.pattern)}g_aLM(e){const g=e.orientation;if(screen.orientation&&screen.orientation.lock)screen.orientation.lock(g).catch(e=>console.warn("[Construct 3] Failed to lock orientation: ",e));else try{let e=!1;screen.lockOrientation?e=screen.lockOrientation(g):screen.webkitLockOrientation?e=screen.webkitLockOrientation(g):screen.mozLockOrientation?e=screen.mozLockOrientation(g):screen.msLockOrientation&&(e=screen.msLockOrientation(g)),e||console.warn("[Construct 3] Failed to lock orientation")}catch(e){console.warn("[Construct 3] Failed to lock orientation: ",e)}}g_aLN(){try{screen.orientation&&screen.orientation.unlock?screen.orientation.unlock():screen.unlockOrientation?screen.unlockOrientation():screen.webkitUnlockOrientation?screen.webkitUnlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()}catch(e){}}g_aLO(e){const g=e.type;if("back"===g)navigator.app&&navigator.app.backHistory?navigator.app.backHistory():window.back();else if("forward"===g)window.forward();else if("home"===g)window.g_aLU();else if("reload"===g)location.reload();else if("url"===g){const g=e.url,_=e.target,t=e.exportType;"windows-uwp"===t&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===t?window.open(g,"_system"):"preview"===t?window.open(g,"_blank"):!this.g_aBp&&(2===_?window.top.location=g:1===_?window.parent.location=g:window.location=g)}else if("new-window"===g){const g=e.url,_=e.tag,t=e.exportType;"windows-uwp"===t&&"undefined"!=typeof Windows?Windows.System.Launcher.launchUriAsync(new Windows.Foundation.Uri(g)):navigator.app&&navigator.app.loadUrl?navigator.app.loadUrl(g,{openExternal:!0}):"cordova"===t?window.open(g,"_system"):window.open(g,_)}}g_aLP(e){const g={navigationUI:"auto"},_=e.navUI;1===_?g.navigationUI="hide":2===_&&(g.navigationUI="show");const t=document.documentElement;t.requestFullscreen?t.requestFullscreen(g):t.mozRequestFullScreen?t.mozRequestFullScreen(g):t.msRequestFullscreen?t.msRequestFullscreen(g):t.webkitRequestFullScreen&&("undefined"==typeof Element.ALLOW_KEYBOARD_INPUT?t.webkitRequestFullScreen():t.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT))}g_aLQ(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()}};g_aJK.g_aKG(e)}